<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.LCY.myapp.model.dao.OrderMapper">
	<select id="orderAll" resultType="com.LCY.myapp.model.dto.Order">
		SELECT * FROM orderlist
	</select>
	
	<select id="orderAllRefac" resultType="com.LCY.myapp.model.dto.Order">
		SELECT
			 c.cafe_name AS cafe_name,
			 p.product_name AS product_name,
			 p.product_price AS product_price
		FROM
			user u, cafe c, product p, orderlist o
		WHERE
			u.user_id = o.user_id AND
			p.product_code = o.product_code AND
			p.cafe_code = c.cafe_code AND
			order_code = #{order_code}
	</select>
	
	<select id="orderList" parameterType="String" resultType="com.LCY.myapp.model.dto.Order">
		select * from orderlist where user_id=#{user_id}
	</select>
	
	<insert id="insertOrderList" parameterType="com.LCY.myapp.model.dto.Order">
		insert into orderlist(user_id, cafe_name, product_name, product_price) 
		values(#{user_id}, #{cafe_name}, #{product_name}, #{product_price})
	</insert>
	
	<insert id="insertOrderListRefac">
		insert into orderlist(user_id, product_code) 
		values(#{user_id}, #{product_code})
	</insert>
</mapper>

